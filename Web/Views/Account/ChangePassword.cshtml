@model PasswordEditModel
@{
    ViewBag.Title = "更改密码";
    Layout = "~/Views/Shared/_Iframe.cshtml";
}
@using (Html.BeginForm("ChangePassword", "Account", FormMethod.Post, new { @class = "form-horizontal", autocomplete = "off" }))
{
    @Html.Message()
    <div class="form-group">
        @Html.LabelFor(n => n.CurrentPassword, new { @class = "col-sm-2 control-label" })
        <div class="col-sm-10">
            <input type="password" class="hidden"/>
            @Html.TextBoxFor(n => n.CurrentPassword, new {@class = "form-control", type = "password"})
            @Html.ValidationMessageFor(n => n.CurrentPassword)
        </div>
    </div>
    <div class="form-group">
        @Html.LabelFor(n => n.Password, new { @class = "col-sm-2 control-label" })
        <div class="col-sm-10">
            @Html.TextBoxFor(n => n.Password, new { @class = "form-control", type = "password" })
            @Html.ValidationMessageFor(n => n.Password)
        </div>
    </div>
    <div class="form-group">
        @Html.LabelFor(n => n.ConfirmPassword, new { @class = "col-sm-2 control-label" })
        <div class="col-sm-10">
            @Html.TextBoxFor(n => n.ConfirmPassword, new { @class = "form-control", type = "password" })
            @Html.ValidationMessageFor(n => n.ConfirmPassword)
        </div>
    </div>
    <div class="form-group">
        <div class="col-sm-offset-2 col-sm-10">
            <center>
                <button type="submit" class="btn btn-primary">提交</button>
            </center>
        </div>
    </div>
}

@section scripts
{
    <script>
        $(function() {
            var msg = "@ViewBag.Msg";
            if (msg == "true") {
                layer.alert("修改成功", {
                    icon: 6
                });
            }
            if (msg == "false") {
                layer.alert("修改失败", {
                    icon: 5
                });
            }

            if (msg == "currenterror") {
                layer.alert("当前密码输入错误", {
                    icon: 5
                });
            }

            if (msg == "samepwd") {
                layer.alert("新密码不能与当前密码相同", {
                    icon: 5
                });
            }
        });
    </script>
}
